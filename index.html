<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Flip Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f5f5f7;
            padding-bottom: 50px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .tabs {
            display: flex;
            background: white;
            position: sticky;
            top: 85px;
            z-index: 99;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .tab {
            flex: 1;
            padding: 18px;
            text-align: center;
            background: white;
            border: none;
            font-size: 1.1em;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f8f9ff;
        }
        
        .tab-content {
            display: none;
            padding: 15px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .preset-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .preset-btn {
            padding: 18px 12px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            color: #667eea;
            font-weight: 600;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .preset-btn:active {
            background: #667eea;
            color: white;
            transform: scale(0.98);
        }
        
        .input-card {
            background: white;
            padding: 18px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .input-card label {
            display: block;
            font-size: 1em;
            color: #333;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .input-card input {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .input-card input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .total-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .total-label {
            font-size: 1em;
            opacity: 0.95;
            margin-bottom: 8px;
        }
        
        .total-amount {
            font-size: 2.2em;
            font-weight: bold;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .input-group {
            background: white;
            padding: 14px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .input-group label {
            display: block;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 6px;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 8px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
        }
        
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .result-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            text-align: center;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .metric-label {
            color: #666;
            font-size: 1em;
        }
        
        .metric-value {
            font-weight: 700;
            font-size: 1.05em;
            color: #333;
        }
        
        .profit-section {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            margin: 15px -15px;
            padding: 20px 15px;
            border-radius: 12px;
            border-left: 5px solid #10b981;
        }
        
        .profit-section .metric-label {
            color: #059669;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .profit-section .metric-value {
            color: #10b981;
            font-size: 1.5em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>üè† Flip Calculator</h1>
    </header>
    
    <div class="tabs">
        <button class="tab active" id="tab-costs">Costs</button>
        <button class="tab" id="tab-results">Results</button>
    </div>
    
    <div id="content-costs" class="tab-content active">
        <div class="preset-buttons">
            <button class="preset-btn" id="preset-light">Light Rehab<br>$25-35K</button>
            <button class="preset-btn" id="preset-medium">Medium Rehab<br>$45-55K</button>
            <button class="preset-btn" id="preset-heavy">Heavy Rehab<br>$75-90K</button>
            <button class="preset-btn" id="preset-custom">Your Default<br>$51K</button>
        </div>
        
        <div class="total-card">
            <div class="total-label">Total Rehab Budget</div>
            <div class="total-amount">$<span id="total-display">51,400</span></div>
        </div>
        
        <div class="input-grid">
            <div class="input-group">
                <label>Appliances</label>
                <input type="number" class="cost-input" data-name="appliances" value="1500">
            </div>
            <div class="input-group">
                <label>Flooring</label>
                <input type="number" class="cost-input" data-name="flooring" value="2000">
            </div>
            <div class="input-group">
                <label>Ext. Paint</label>
                <input type="number" class="cost-input" data-name="extPaint" value="2500">
            </div>
            <div class="input-group">
                <label>Int. Paint</label>
                <input type="number" class="cost-input" data-name="intPaint" value="4000">
            </div>
            <div class="input-group">
                <label>Roof</label>
                <input type="number" class="cost-input" data-name="roof" value="6500">
            </div>
            <div class="input-group">
                <label>Windows</label>
                <input type="number" class="cost-input" data-name="windows" value="6500">
            </div>
            <div class="input-group">
                <label>HVAC</label>
                <input type="number" class="cost-input" data-name="hvac" value="500">
            </div>
            <div class="input-group">
                <label>Plumbing</label>
                <input type="number" class="cost-input" data-name="plumbing" value="1000">
            </div>
            <div class="input-group">
                <label>Electrical</label>
                <input type="number" class="cost-input" data-name="electrical" value="1000">
            </div>
            <div class="input-group">
                <label>Cabinets</label>
                <input type="number" class="cost-input" data-name="cabinets" value="750">
            </div>
            <div class="input-group">
                <label>Counters</label>
                <input type="number" class="cost-input" data-name="counters" value="2000">
            </div>
            <div class="input-group">
                <label>Tile</label>
                <input type="number" class="cost-input" data-name="tile" value="2800">
            </div>
            <div class="input-group">
                <label>Carpet</label>
                <input type="number" class="cost-input" data-name="carpet" value="0">
            </div>
            <div class="input-group">
                <label>Ext. Siding</label>
                <input type="number" class="cost-input" data-name="siding" value="1500">
            </div>
            <div class="input-group">
                <label>Fixtures</label>
                <input type="number" class="cost-input" data-name="fixtures" value="650">
            </div>
            <div class="input-group">
                <label>Faucets</label>
                <input type="number" class="cost-input" data-name="faucets" value="400">
            </div>
            <div class="input-group">
                <label>Fans</label>
                <input type="number" class="cost-input" data-name="fans" value="300">
            </div>
            <div class="input-group">
                <label>Toilet</label>
                <input type="number" class="cost-input" data-name="toilet" value="300">
            </div>
            <div class="input-group">
                <label>Sheetrock</label>
                <input type="number" class="cost-input" data-name="sheetrock" value="500">
            </div>
            <div class="input-group">
                <label>Cleanout</label>
                <input type="number" class="cost-input" data-name="cleanout" value="1200">
            </div>
            <div class="input-group">
                <label>Deep Clean</label>
                <input type="number" class="cost-input" data-name="clean" value="500">
            </div>
            <div class="input-group">
                <label>Contingency</label>
                <input type="number" class="cost-input" data-name="contingency" value="15000">
            </div>
        </div>
    </div>
    
    <div id="content-results" class="tab-content">
        <div class="input-card">
            <label>Purchase Price</label>
            <input type="number" id="purchase-price" value="130000">
        </div>
        
        <div class="input-card">
            <label>ARV (After Repair Value)</label>
            <input type="number" id="arv-value" value="215000">
        </div>
        
        <div id="results-output"></div>
    </div>
    
    <script>
        // Get all elements
        const tabCosts = document.getElementById('tab-costs');
        const tabResults = document.getElementById('tab-results');
        const contentCosts = document.getElementById('content-costs');
        const contentResults = document.getElementById('content-results');
        const totalDisplay = document.getElementById('total-display');
        const costInputs = document.querySelectorAll('.cost-input');
        const purchasePrice = document.getElementById('purchase-price');
        const arvValue = document.getElementById('arv-value');
        const resultsOutput = document.getElementById('results-output');
        
        // Tab switching
        tabCosts.addEventListener('click', function() {
            tabCosts.classList.add('active');
            tabResults.classList.remove('active');
            contentCosts.classList.add('active');
            contentResults.classList.remove('active');
        });
        
        tabResults.addEventListener('click', function() {
            tabResults.classList.add('active');
            tabCosts.classList.remove('active');
            contentResults.classList.add('active');
            contentCosts.classList.remove('active');
            calculateResults();
        });
        
        // Preset buttons
        document.getElementById('preset-light').addEventListener('click', function() {
            loadPreset('light');
        });
        
        document.getElementById('preset-medium').addEventListener('click', function() {
            loadPreset('medium');
        });
        
        document.getElementById('preset-heavy').addEventListener('click', function() {
            loadPreset('heavy');
        });
        
        document.getElementById('preset-custom').addEventListener('click', function() {
            loadPreset('custom');
        });
        
        function loadPreset(type) {
            const presets = {
                light: [1000, 1500, 0, 500, 1500, 2500, 800, 300, 0, 1500, 200, 0, 500, 400, 300, 200, 0, 500, 500, 1500, 0, 8000],
                medium: [1500, 2000, 0, 1500, 2500, 4000, 1200, 500, 6500, 2800, 300, 500, 750, 650, 400, 300, 500, 1000, 1000, 2000, 6500, 15000],
                heavy: [2500, 4000, 2000, 3000, 4000, 6000, 2000, 800, 12000, 5000, 600, 2000, 3000, 1200, 800, 600, 5000, 3000, 3000, 4000, 10000, 20000],
                custom: [1500, 2000, 0, 1500, 2500, 4000, 1200, 500, 6500, 2800, 300, 500, 750, 650, 400, 300, 500, 1000, 1000, 2000, 6500, 15000]
            };
            
            const inputs = document.querySelectorAll('.cost-input');
            const values = presets[type];
            inputs.forEach((input, index) => {
                input.value = values[index];
            });
            updateTotal();
        }
        
        // Update total on any input change
        costInputs.forEach(input => {
            input.addEventListener('input', updateTotal);
        });
        
        purchasePrice.addEventListener('input', calculateResults);
        arvValue.addEventListener('input', calculateResults);
        
        function updateTotal() {
            let total = 0;
            costInputs.forEach(input => {
                total += parseFloat(input.value) || 0;
            });
            totalDisplay.textContent = total.toLocaleString('en-US', {minimumFractionDigits: 0});
        }
        
        function calculateResults() {
            let totalRehab = 0;
            costInputs.forEach(input => {
                totalRehab += parseFloat(input.value) || 0;
            });
            
            const purchase = parseFloat(purchasePrice.value) || 130000;
            const arv = parseFloat(arvValue.value) || 215000;
            
            const holdingBuy = purchase * 0.0327;
            const closingSell = arv * 0.065;
            const breakeven = purchase + holdingBuy + totalRehab + closingSell;
            const profit = arv - breakeven;
            const margin = (profit / arv) * 100;
            const ltv80 = arv * 0.8;
            const cashOut = ltv80 - (purchase + totalRehab);
            
            resultsOutput.innerHTML = `
                <div class="result-card">
                    <div class="result-title">Deal Analysis</div>
                    
                    <div class="metric">
                        <span class="metric-label">Purchase Price</span>
                        <span class="metric-value">$${purchase.toLocaleString()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Holding + CC</span>
                        <span class="metric-value">$${Math.round(holdingBuy).toLocaleString()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Rehab</span>
                        <span class="metric-value">$${Math.round(totalRehab).toLocaleString()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Close + Commish</span>
                        <span class="metric-value">$${Math.round(closingSell).toLocaleString()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Breakeven</span>
                        <span class="metric-value">$${Math.round(breakeven).toLocaleString()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Completed Value</span>
                        <span class="metric-value">$${arv.toLocaleString()}</span>
                    </div>
                    
                    <div class="profit-section">
                        <div class="metric">
                            <span class="metric-label">üí∞ Flip Profit</span>
                            <span class="metric-value">$${Math.round(profit).toLocaleString()}</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Profit Margin</span>
                            <span class="metric-value">${margin.toFixed(2)}%</span>
                        </div>
                    </div>
                    
                    <div class="metric">
                        <span class="metric-label">LTV 80%</span>
                        <span class="metric-value">$${Math.round(ltv80).toLocaleString()}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Cash Out REFI</span>
                        <span class="metric-value">${cashOut > 0 ? '$' + Math.round(cashOut).toLocaleString() : 'N/A'}</span>
                    </div>
                </div>
            `;
        }
        
        // Initialize
        updateTotal();
    </script>
</body>
</html>
